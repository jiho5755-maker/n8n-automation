# 노션 DB 스키마 설계서 (쇼핑몰 운영 자동화)

> **작성일**: 2026-02-24
> **대상**: homepage-automation 프로젝트 신규 DB 6개
> **용도**: n8n 워크플로우에서 직접 사용할 노션 DB 속성 설계

---

## 생성 순서 (의존성 기준)

1. **CS 템플릿 DB** (F007 초기화 선행)
2. **CS 문의 DB** (F004, F006 사용)
3. **리뷰 DB** (F008, F009 사용)
4. **콘텐츠 캘린더 DB** (F030, F031 사용)
5. **경쟁사 상품 DB** (F050 사용)
6. **가격 이력 DB** (F050 사용)

> DB 생성 후 UUID (2026-02-25 생성 완료, API 검증 완료):
> - CS 문의 DB: `312d119f-a669-81bb-859f-eda4a609e8bd`
> - CS 템플릿 DB: `312d119f-a669-8147-aad9-cdb446e24481`
> - 리뷰 DB: `312d119f-a669-81b4-8a59-e53b0b97a234`
> - 콘텐츠 캘린더 DB: `312d119f-a669-8101-8340-dc7991e3e805`
> - 경쟁사 상품 DB: `312d119f-a669-8111-8b47-e572332fbfae`
> - 가격 이력 DB: `312d119f-a669-81f8-924e-c224fd250468`
> - 허브 페이지 (부모): `312d119f-a669-8135-b65a-e354dfae1d58` (할 일 DB 하위)

---

## DB 1: CS 문의 DB

**용도**: 전 채널(자사몰/스마트스토어/전화) CS 이력 영구 보관. 채널톡 무료 플랜의 30일 제한 극복.
**사용 워크플로우**: F004 (자동 기록), F005 (템플릿 추천 연결), F006 (미답변 추적)

| 속성명 | 타입 | 옵션/설명 |
|-------|------|---------|
| 제목 (문의 요약) | title | CS 문의 내용 요약. 자사몰은 API 자동 입력. 타 채널은 수동 |
| 채널 | select | 자사몰 / 스마트스토어 / 전화 / 카카오 / 인스타 / 기타 |
| 카테고리 | select | 상품문의 / 배송 / 주문결제 / 교환반품 / 기타 |
| 접수 일시 | date | 문의 접수 시각 (KST) |
| 고객명 | rich_text | 고객 이름 또는 아이디 |
| 원문 내용 | rich_text | CS 전체 내용 (1,000자 이내) |
| 문의 ID | rich_text | 메이크샵 게시판 문의 고유 ID (중복 방지용) |
| 답변 상태 | select | 미답변 / 답변 완료 / 처리 중 |
| 답변 일시 | date | 답변 완료 시각 (KST) |
| 긴급도 | select | 일반 / 주의 (1시간+) / 긴급 (3시간+) / 즉시처리 (6시간+) |
| 추천 템플릿 | rich_text | F005가 자동 입력하는 추천 답변 템플릿명 |
| 메모 | rich_text | 운영자 내부 메모 |

**노션 생성 방법**:
1. 노션 사이드바 > + 새 페이지 > 데이터베이스 (전체 페이지)
2. 이름: "CS 문의 DB"
3. 위 속성들을 순서대로 추가
4. 생성 후 URL에서 UUID 복사 (`notion.so/.../{UUID}?v=...`)

**n8n 연동 필터 쿼리 예시**:

```json
// F006: 미답변 + 접수일로부터 1시간 이상 경과
{
  "filter": {
    "and": [
      {
        "property": "답변 상태",
        "select": { "equals": "미답변" }
      },
      {
        "property": "접수 일시",
        "date": { "before": "{{$now.minus({hours: 1}).toISO()}}" }
      }
    ]
  }
}
```

---

## DB 2: CS 템플릿 DB

**용도**: 카테고리별 답변 템플릿 18개+ 보관. F005 키워드 매칭 시 추천 템플릿 제공.
**사용 워크플로우**: F005 (템플릿 추천), F007 (초기 구축 - 수동 1회)

| 속성명 | 타입 | 옵션/설명 |
|-------|------|---------|
| 템플릿명 | title | 예: "배송 기간 안내 - 표준", "커스텀 문의 - 대량" |
| 카테고리 | select | 상품문의 / 배송 / 주문결제 / 교환반품 / 기타 |
| 키워드 | rich_text | 매칭 키워드 (쉼표 구분). 예: "배송,택배,도착,언제" |
| 답변 내용 | rich_text | 실제 발송할 답변 내용. #{고객명} #{상품명} 등 변수 사용 |
| 사용 횟수 | number | n8n이 자동 증가. 인기 템플릿 파악 용도 |
| 활성 여부 | checkbox | 체크 = 사용 중 / 미체크 = 비활성 |
| 최종 수정일 | date | 마지막 수정 날짜 |

**초기 구축 (F007 - 수동 1회)**:

아래 18개 템플릿을 노션에 수동 입력:

| # | 템플릿명 | 카테고리 | 주요 키워드 |
|---|---------|---------|-----------|
| 1 | 배송 기간 안내 - 표준 | 배송 | 배송,택배,도착,언제,기간 |
| 2 | 배송 지연 안내 | 배송 | 지연,늦,연착 |
| 3 | 운송장 번호 안내 | 배송 | 운송장,송장,번호 |
| 4 | 상품 구성 안내 | 상품문의 | 구성품,포함,들어있 |
| 5 | 커스텀/개인화 안내 | 상품문의 | 커스텀,개인화,이름,문구 |
| 6 | 대량 주문 안내 | 상품문의 | 대량,단체,많이,여러 |
| 7 | 소재/재질 안내 | 상품문의 | 소재,재질,성분,원단 |
| 8 | 사이즈 안내 | 상품문의 | 사이즈,크기,치수 |
| 9 | 무통장 입금 안내 | 주문결제 | 무통장,입금,계좌 |
| 10 | 결제 취소 안내 | 주문결제 | 취소,주문취소,결제취소 |
| 11 | 주문 변경 안내 | 주문결제 | 변경,수정,주소변경 |
| 12 | 환불 처리 안내 | 교환반품 | 환불,반품,돌려 |
| 13 | 교환 처리 안내 | 교환반품 | 교환,바꿔 |
| 14 | 불량품 처리 안내 | 교환반품 | 불량,파손,깨짐,찢 |
| 15 | 포장 문의 안내 | 상품문의 | 포장,박스,선물포장 |
| 16 | 재입고 문의 안내 | 상품문의 | 재입고,품절,없 |
| 17 | 웨딩 납기 안내 | 상품문의 | 웨딩,결혼,납기,날짜 |
| 18 | 기타 문의 안내 | 기타 | (키워드 없음, 폴백용) |

---

## DB 3: 리뷰 DB

**용도**: 자사몰 + 스마트스토어 리뷰 전체 이력 보관. AI 답변 결과 및 SNS 활용 여부 추적.
**사용 워크플로우**: F008 (AI 자동 답변), F009 (부정 리뷰 알림), F031 (SNS 콘텐츠 제안)

| 속성명 | 타입 | 옵션/설명 |
|-------|------|---------|
| 제목 (리뷰 요약) | title | 리뷰 내용 앞 50자 요약 |
| 채널 | select | 자사몰 / 스마트스토어 |
| 별점 | number | 1~5 숫자 |
| 감성 분류 | select | 긍정-자동 / 긍정-승인필요 / 부정 / SNS활용가능 |
| 리뷰 원문 | rich_text | 고객 작성 리뷰 전체 내용 |
| 리뷰어 | rich_text | 고객 닉네임 또는 아이디 |
| 상품명 | rich_text | 리뷰 대상 상품명 |
| 사진 포함 | checkbox | 사진 첨부 여부 (SNS 활용 판단 기준) |
| 리뷰 ID | rich_text | 메이크샵 리뷰 고유 ID (중복 방지) |
| 리뷰 작성일 | date | 고객이 리뷰 작성한 날짜 |
| 답변 방식 | select | API자동 / AI초안-승인 / 수동 / 미답변 |
| AI 생성 답변 | rich_text | OpenAI가 생성한 답변 내용 |
| 등록 완료일 | date | 실제 답변이 등록된 날짜 |
| SNS 활용 여부 | checkbox | F031 SNS 콘텐츠로 활용했는지 |

**n8n 연동 필터 쿼리 예시**:

```json
// F008: 미답변 리뷰 조회
{
  "filter": {
    "property": "답변 방식",
    "select": { "equals": "미답변" }
  }
}

// F031: SNS 활용 가능 리뷰 (별점5 + 사진 포함)
{
  "filter": {
    "and": [
      { "property": "별점", "number": { "equals": 5 } },
      { "property": "사진 포함", "checkbox": { "equals": true } },
      { "property": "SNS 활용 여부", "checkbox": { "equals": false } }
    ]
  }
}
```

---

## DB 4: 콘텐츠 캘린더 DB

**용도**: SNS 발행 일정 관리. F030 리마인더 알림 + F034 프로모션 자동 관리.
**사용 워크플로우**: F030 (SNS 리마인더), F031 (리뷰→콘텐츠 제안), F034 (프로모션 관리)

| 속성명 | 타입 | 옵션/설명 |
|-------|------|---------|
| 콘텐츠 제목 | title | 게시물 주제/제목 |
| 발행 채널 | multi_select | 인스타그램 / 블로그 / 카카오스토리 / 유튜브 |
| 발행 예정일 | date | 게시 예정 날짜 |
| 상태 | select | 기획 / 제작 중 / 완성 / 발행 완료 |
| 콘텐츠 타입 | select | 이미지 / 릴스/영상 / 텍스트 / 리뷰 활용 / 프로모션 |
| 내용 초안 | rich_text | 게시물 초안 내용 |
| 리뷰 출처 | rich_text | F031에서 연결된 리뷰 DB 항목 ID |
| 프로모션 연결 | rich_text | F034 연결 프로모션 ID |
| 태그/해시태그 | rich_text | #웨딩기프트 #답례품 등 |
| 담당자 메모 | rich_text | 운영자 내부 메모 |

**n8n 연동 필터 쿼리 예시**:

```json
// F030: 내일 발행 예정 콘텐츠 조회
{
  "filter": {
    "and": [
      {
        "property": "발행 예정일",
        "date": {
          "equals": "{{$now.plus({days: 1}).toFormat('yyyy-MM-dd')}}"
        }
      },
      {
        "property": "상태",
        "select": { "does_not_equal": "발행 완료" }
      }
    ]
  }
}
```

---

## DB 5: 경쟁사 상품 DB

**용도**: 경쟁사 상품 기본 정보 보관. F050 가격 모니터링 기준 데이터.
**사용 워크플로우**: F050 (경쟁사 가격 모니터링)

| 속성명 | 타입 | 옵션/설명 |
|-------|------|---------|
| 상품명 | title | 경쟁사 상품명 (검색 키워드) |
| 경쟁사명 | rich_text | 판매자/브랜드명 |
| 판매 채널 | select | 스마트스토어 / 쿠팡 (참고용) / 기타 |
| 네이버 상품 URL | url | 네이버 쇼핑 상품 링크 |
| 현재 가격 | number | 최근 조회된 가격 (원) |
| 최저가 | number | 조회 이후 최저가 |
| 최고가 | number | 조회 이후 최고가 |
| 최초 등록일 | date | 모니터링 시작일 |
| 최종 조회일 | date | 마지막 가격 조회 날짜 |
| 모니터링 여부 | checkbox | 활성 모니터링 대상 여부 |
| 메모 | rich_text | 특이사항 메모 |

---

## DB 6: 가격 이력 DB

**용도**: 경쟁사 상품 일별 가격 히스토리. 가격 변동 추이 분석용.
**사용 워크플로우**: F050 (매일 가격 기록)

| 속성명 | 타입 | 옵션/설명 |
|-------|------|---------|
| 기록 ID | title | `{상품명}_{날짜}` 형식. 예: "웨딩답례품A_2026-02-24" |
| 경쟁사 상품 | relation | 경쟁사 상품 DB 연결 |
| 조회 날짜 | date | 가격 조회 날짜 |
| 가격 | number | 해당 날짜 조회 가격 (원) |
| 변동 여부 | checkbox | 전일 대비 가격 변경됨 |
| 변동 금액 | number | 전일 대비 가격 차이 (원, 음수 = 인하) |
| 변동률 | number | 전일 대비 변동 % |
| 네이버 순위 | number | 키워드 검색 결과 순위 |

---

## n8n에서 UUID 확인하는 방법

노션 DB를 생성한 후 UUID를 확인하는 방법:

```
방법 1 - URL에서 직접 확인:
  노션 DB 페이지 URL: https://www.notion.so/[UUID]?v=[ViewID]
  UUID = 32자리 하이픈 구분 문자열

방법 2 - n8n Notion 노드에서 확인:
  Notion 노드 > Database > Search 입력 시 드롭다운에 DB 이름 표시됨
  → 해당 항목의 실제 ID를 API로 확인

방법 3 - 노션 API로 조회:
  GET https://api.notion.com/v1/search
  Body: {"query": "CS 문의 DB", "filter": {"value": "database", "property": "object"}}
  → results[0].id 값이 실제 UUID
```

---

## 생성 완료 체크리스트

- [x] CS 문의 DB 생성 → UUID: `312d119f-a669-81bb-859f-eda4a609e8bd`
- [x] CS 템플릿 DB 생성 → UUID: `312d119f-a669-8147-aad9-cdb446e24481`
- [ ] CS 템플릿 DB에 18개 초기 템플릿 입력 (F007) — Phase 1 CS 자동화 착수 시 진행
- [x] 리뷰 DB 생성 → UUID: `312d119f-a669-81b4-8a59-e53b0b97a234`
- [x] 콘텐츠 캘린더 DB 생성 → UUID: `312d119f-a669-8101-8340-dc7991e3e805`
- [x] 경쟁사 상품 DB 생성 → UUID: `312d119f-a669-8111-8b47-e572332fbfae`
- [x] 가격 이력 DB 생성 → UUID: `312d119f-a669-81f8-924e-c224fd250468`
- [x] UUID 6개 모두 MEMORY.md + notion-db-schema.md에 기록 완료
