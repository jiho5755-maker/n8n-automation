# 쇼핑몰 운영 자동화 로드맵 (전면 개편 v2)

> **최초 작성**: 2026-02-24 | **전면 개편**: 2026-02-24 (사용자 피드백 반영)
> **목적**: 메이크샵 D4 쇼핑몰(웨딩기프트/답례품) 1인 운영 자동화
> **원칙**: 즉시 효과 있는 것 먼저 → 기반이 완성된 후 고도화

---

## 기술 스택

| 구분 | 도구 | 비고 |
|------|------|------|
| 자동화 엔진 | n8n (Docker, n8n.pressco21.com) | automation-project와 공유 |
| 쇼핑몰 API | 메이크샵 오픈 API (시간당 500회) | 이미 확보 |
| 회원 CRM | 에어테이블 (`app6MBsHo7AKwh5XD`) | 강사회원 등급 관리 |
| 데이터 기록 | 노션 API (초당 3회 제한) | DB 6개 신규 예정 |
| AI 답변 | OpenAI GPT-4o-mini | 스마트스토어 CS 자동화 |
| 알림 | 텔레그램 @Pressco21_bot | 이미 동작 중 |
| 알림톡 | 메이크샵 자체 (건당 15.6원) | 관리자 UI 수동 등록 필수 |
| 스마트스토어 | 네이버 커머스 API (bcrypt 인증) | 이미 확보 |

---

## ⚠️ 확정된 기술적 제약 (v2 개편 사유)

| 항목 | 결론 | 영향 |
|------|------|------|
| **채널톡 무료 플랜** | Webhook/API 완전 미지원 (2025 확인) | F004/F005/F006/F007 채널톡 연동 불가 |
| **알림톡 템플릿 등록** | 메이크샵 관리자 UI에서만 수동 등록 (API 없음) | n8n으로 자동 등록 불가, 수동 필수 |
| **스마트스토어 리뷰 API** | 리뷰 자동 수집/답변 등록 API 미지원 확정 | 리뷰 자동 답변 자동화 불가 |
| **에어테이블 n8n 연동** | 공식 Airtable Trigger 노드 지원 (폴링 방식) | 강사회원 등급 변경 자동화 가능 |
| **메이크샵 주문 전체 조회** | `type=order`는 userid 필수 (와일드카드 미지원) — 2026-02-25 확인 | userid 없이 전체 주문 조회 불가. 무통장 자동취소는 메이크샵 자체 기능으로 대체 |

---

## 우선순위 재조정 요약

```
[즉시 효과] ⭐⭐⭐
1. F010 - 무통장 미수금 자동 처리 (Week 1) → 지금 당장 효과
2. FA-001 - 에어테이블 승인완료 → 강사회원 등급 자동 변경 (Week 1~2)

[기반 작업] ⭐⭐
3. 노션 DB 6개 생성 (착수 준비)
4. n8n Credential 등록 (착수 준비)
5. 알림톡 템플릿 수동 등록 (F010용 먼저, 나머지 병렬 대기)

[중기] ⭐
6. F040 - 스마트스토어 문의 AI 자동 답변 (bcrypt 필요, Week 3~4)
7. SNS 콘텐츠 관리 캘린더 (팀 협업, Week 5~6)
8. F025 - 혜택 자동 지급 활용 가이드 + 이벤트 세팅 자동화

[검토 보류] ⌛
- F004/F005/F006/F007: 채널톡 유료 전환($29/월) 결정 후 진행
- F008/F009/F013: 효과 분석 및 조건 확보 후 진행

[제외/미루기] ❌
- F022 (휴면 고객): 사업 특성상 불필요
- F011 (리포트): 전체 자동화 안정화 후 마지막에
- F024 (리뷰 유도): 실효성 검토 필요
```

---

## Phase 0 — 착수 준비 (완료)

> 상태: ✅ 완료 (2026-02-25)

### Task 001: 노션 DB 6개 생성 ✅ 완료 (2026-02-25)
> 참고: `notion-db-schema.md`

- [x] CS 문의 DB 생성 → UUID: `312d119f-a669-81bb-859f-eda4a609e8bd`
- [x] CS 템플릿 DB 생성 → UUID: `312d119f-a669-8147-aad9-cdb446e24481`
- [x] 리뷰 DB 생성 → UUID: `312d119f-a669-81b4-8a59-e53b0b97a234`
- [x] 콘텐츠 캘린더 DB 생성 → UUID: `312d119f-a669-8101-8340-dc7991e3e805`
- [x] 경쟁사 상품 DB 생성 → UUID: `312d119f-a669-8111-8b47-e572332fbfae`
- [x] 가격 이력 DB 생성 → UUID: `312d119f-a669-81f8-924e-c224fd250468`

### Task 002: n8n Credential 등록 ✅ F010 필수 항목 완료 (2026-02-25)
> 서버: https://n8n.pressco21.com > Settings > Credentials

- [x] 메이크샵 오픈 API — `PRESSCO21-Makeshop-Shopkey` + `PRESSCO21-Makeshop-Licensekey` 등록됨
- [x] 텔레그램 봇 — `PRESSCO21-Telegram-Bot` 등록됨
- [ ] OpenAI API (GPT-4o-mini) — Phase 2(리뷰 자동 답변) 시 등록
- [x] 에어테이블 Personal Access Token — `Airtable PAT` 기존 등록됨
- [x] 노션 API — 기존 automation-project Credential 재사용
- [ ] 네이버 커머스 API (App ID/Secret, bcrypt용) — Phase 2 시 .env 방식으로 등록
- [ ] n8n Variables 유료 플랜 전용 → 민감 정보는 서버 .env 파일로 관리

### Task 003: 알림톡 템플릿 등록 (수동, 검수 대기)
> 참고: `alimtalk-templates.md`
> ⚠️ 메이크샵 관리자 UI에서만 등록 가능 (API 자동화 불가) — **가이드 제공 완료 2026-02-25**

- [ ] **F010용** 무통장 취소 알림 (`PRESSCO_CANCEL`) — **최우선 등록** (Phase 1 착수 전 신청 권장)
- [ ] F021용 장바구니 이탈 (`PRESSCO_CART`)
- [ ] F020용 VIP 승급 (`PRESSCO_VIP`)
- [ ] F024용 리뷰 유도 (`PRESSCO_REVIEW`)
- [ ] F022용 혜택 지급 (`PRESSCO_BENEFIT`)
- [ ] 검수 완료 후 template_code 이 파일에 기록

---

## Phase 1 — 즉시 효과 (Week 1~3)

> 상태: 🔵 진행 중 | 시작일: 2026-02-25

### ~~⭐ Task 010: 무통장 미수금 자동 관리 (F010)~~ → ✅ 메이크샵 자체 기능으로 대체 완료

> **2026-02-25 확인**: 메이크샵 관리자에 무통장 입금 기한 자동취소 기능 내장됨
> **n8n 구현 불필요** — 메이크샵 오픈 API가 userid 없이 전체 주문 조회를 지원하지 않아 n8n으로 구현 불가능함을 확인
> **조치**: 서버에 배포된 워크플로우(ID: `8mvAqKsA1BUkPF3j`)는 비활성 상태로 보관
> **PRESSCO_CANCEL 알림톡**: 등록 불필요 (메이크샵 자체 기능이 처리)

### ⭐ Task FA-001: 에어테이블 강사회원 등급 자동 변경 (신규)

**배경**: 에어테이블 강사공간 DB에서 `진행 상태 = 승인완료` 클릭 시 메이크샵 강사회원 그룹 즉시 변경
**상세 설계**: `fa001-instructor-upgrade.md` 참조

**에어테이블 구조 (이미지 확인 완료)**:
- App ID: `app6MBsHo7AKwh5XD` / Table: `tblo1NVcundJjJKJ3`
- 식별 필드: **주소 (이메일)** — @naver.com 등 → 메이크샵 회원 조회에 사용
- 트리거: `진행 상태 = 승인완료` AND `n8n_처리완료 = false`

```
매 5분 스케줄 → Airtable 신규 승인완료 건 조회
→ 이메일(주소 필드)로 메이크샵 회원 조회
  → [존재] 강사회원 그룹 변경 → Airtable 처리완료 기록 → 텔레그램 알림
  → [없음] 텔레그램 수동 확인 요청 (이메일 불일치)
```

**사전 준비 (사용자 직접)**:
- [ ] 에어테이블에 `n8n_처리완료` (Checkbox) 필드 추가
- [ ] 에어테이블에 `n8n_처리일시` (Date) 필드 추가
- [ ] 메이크샵 관리자 > 회원그룹에서 **강사회원 group_code** 확인
- [ ] 에어테이블 Personal Access Token 발급 (airtable.com/create/tokens)

**n8n 구현**:
- [ ] Airtable Credential 등록
- [ ] FA-001 워크플로우 JSON 생성 (n8n-workflow-builder 에이전트 활용)
- [ ] 메이크샵 회원 조회 API 테스트 (이메일로)
- [ ] 그룹 변경 API 테스트
- [ ] 서버 배포 + 활성화
- [ ] 실제 케이스 1건으로 전체 플로우 확인

---

## ~~Phase 2 — 스마트스토어 CS 자동화~~ → ❌ 제외 (불필요)

> **2026-02-25 결정**: 스마트스토어 CS 자동 답변 불필요, 건너뜀
> F040 제외, Phase 3 (SNS 콘텐츠 캘린더)으로 바로 진행

---

## Phase 3 — SNS 콘텐츠 팀 협업 시스템

> 상태: ✅ 완료 (2026-02-26)

### Task 030: SNS 콘텐츠 캘린더 + 팀 협업 자동화

**목적**: 담당 직원들이 함께 보는 콘텐츠 일정 + n8n 리마인더

**구성**:
- **노션 콘텐츠 캘린더 DB**: 발행 일정, 채널, 상태, 담당자, 초안 관리
- **n8n 리마인더**: 매일 21:00 + 매주 일요일 20:00 텔레그램 발송

```
콘텐츠 캘린더 DB 활용:
- 인스타그램 / 블로그 / 카카오스토리 발행 일정
- 상태: 기획→제작중→완성→예약→발행완료
- 담당자: 직원별 할당
- AI 일정 제안: GPT가 웨딩 시즌/기념일 기반 콘텐츠 아이디어 제안

n8n 자동화:
- 매일 21:00: 내일 발행 예정 + 미완성 경고 → 텔레그램
- 매주 일요일 20:00: 이번 주 계획 현황 + 다음 주 추천 일정 → 텔레그램
- 특별 이벤트 알림: 발렌타인/화이트데이/어버이날/결혼 성수기 등
```

- [x] 콘텐츠 캘린더 DB 스키마 확정 (notion-db-schema.md 참조) — UUID: `312d119f-a669-8101-8340-dc7991e3e805`
- [x] n8n 리마인더 워크플로우 JSON 생성 (F030a 일일 + F030b 주간)
- [x] 웨딩/기념일 마케팅 캘린더 하드코딩 (GPT 대신 Code 노드 내장)
- [x] 서버 배포 + 활성화 (F030a ID: `A2VToTXNoaeHu29N`, F030b ID: `3X7AM40dgQP4SQAO`)
- [x] 노션 콘텐츠 캘린더 DB를 Integration에 공유 확인 — n8n 업무자동화 연결 유지
- [x] 노션 DB 허브 페이지 워크스페이스 최상단으로 이동 (할 일 DB 오염 해소, 2026-02-26)
- [x] 실제 콘텐츠 테스트 데이터 입력 후 텔레그램 알림 수신 확인 (2026-02-26)

---

## Phase 4 — 혜택 자동 지급 활용 시스템 (F025)

> 상태: ⚪ 대기

### Task 016: 혜택 자동 지급 + 이벤트 활용 가이드

**방향**: 단순 자동화가 아니라 이벤트별 세팅 가이드 + 실행 자동화

**이벤트별 활용 가이드**:

| 이벤트 | 혜택 | 자동화 방식 | 세팅 방법 |
|--------|------|-----------|---------|
| 구매 3회 달성 | 쿠폰 5,000원 | n8n 주문 완료 후속 처리 | 노션에 조건 설정 |
| 누적 15만원 달성 | 적립금 3,000원 | n8n 자동 지급 | 노션에 조건 설정 |
| 웨딩 시즌 프로모션 | 쿠폰 10% | 일정 기반 자동 발급 | 캘린더 DB 연동 |
| VIP 승급 | 쿠폰 + 적립금 | 에어테이블 승인완료 연동 | FA-001에 통합 |
| 리뷰 작성 보상 | 적립금 1,000원 | 메이크샵 자체 기능 활용 | 관리자 설정 |

```
n8n 혜택 지급 자동화 구조:
노션 이벤트 DB (조건/혜택/기간 설정) → n8n 폴링
→ 조건 확인 (메이크샵 API 주문 통계)
→ 혜택 자동 지급 (쿠폰/적립금 API)
→ 텔레그램 결과 알림
```

- [ ] 이벤트별 활용 가이드 문서화
- [ ] 노션 이벤트 설정 DB 구성
- [ ] n8n 혜택 지급 워크플로우 구현
- [ ] 이벤트별 테스트

---

## Phase 5 — CS 채널 통합 자동화 (조건부, 채널톡 결정 후)

> ⚠️ **채널톡 유료 전환 여부 결정 필수** (얼리스테이지: ~$29/월)
> 무료 유지 시: 이 Phase 전체 보류

### 채널톡 유료 전환 시 구현 가능:

| 기능 | 내용 |
|------|------|
| F004 | 채널톡 Webhook → 신규 CS 노션 DB 자동 기록 |
| F005 | CS 수신 즉시 텔레그램 알림 + 키워드 기반 답변 템플릿 추천 |
| F006 | 미답변 CS 추적 (1h/3h/6h 단계별 텔레그램 경고) |
| F007 | CS 템플릿 DB 18개 초기 구축 + 키워드 매칭 |

### 채널톡 무료 유지 시 대안:
- 채널톡에서 수동으로 확인 + 중요 건 텔레그램 수동 포워딩
- n8n으로 자동화할 수 없으므로 알림 개선만 가능
- 각 채널(네이버 톡톡/카카오 등) 직접 API 연동 검토 (별도 프로젝트)

---

## Phase 6 — 장바구니 이탈 분석 + 리뷰 유도 (효과 검증 후)

> ⚠️ 효과 분석 선행 필요, 후순위

### Task 013: 장바구니 이탈 알림톡 (F021) — 쿠폰 없이

**변경**: 쿠폰 자동 발급 제거 → 알림톡 발송만 (쿠폰은 추후 결정)
**효과 측정**: 발송 대상 대비 전환율 추적 후 계속 여부 결정

```
매일 10:00
→ 장바구니 24시간 이탈 고객 조회
→ 알림톡 발송 (상품 안내만, 쿠폰 없이)
→ 노션에 발송 기록 (전환율 추적용)
→ 2~4주 후 전환율 분석 → 효과 있으면 유지, 없으면 중단
```

---

## Phase 7 — 마케팅 고도화 (여유 시)

> 상태: ⚪ 대기

### Task 032: 반복 CS → 상세페이지 개선 인사이트 (F032)
- 월 1회 CS 문의 패턴 분석 → 가장 많은 질문 → 상세페이지 보완 제안
- 채널톡 유료 전환 후 CS DB 데이터 쌓인 뒤 진행

### Task 033: SEO 자동 최적화 (F033)
- 키워드 트렌드 수집 → 상품 SEO 자동 업데이트
- 메이크샵 상품 SEO API 활용

### Task 034: 프로모션 자동 관리 (F034)
- 노션 캘린더 → 기획전 자동 생성/종료

### Task 050: 경쟁사 가격 모니터링 (F050)
- 네이버 검색 API 발급 필요
- 일 25,000회 무료

---

## Phase 8 — 카카오 채널 고도화 (결정: 오픈빌더 진행)

> 상태: ⚪ 대기 | **방향 확정: 카카오 오픈빌더** (서버 0, 채널 보유)
> **상세 전략**: `kakao-channel-strategy.md` 참조

### Phase A — 기반 구축 (즉시, 개발 없음)
- [ ] 채널 프로필 완성 (소개 문구, 이미지, 운영 시간)
- [ ] 오픈빌더 챗봇 생성 + 카카오 채널 연결
- [ ] 웰컴 블록 작성 (첫 채팅 시 인사 + 메뉴 버튼)
- [ ] 기본 메뉴: 상품문의 / 배송조회 / 주문결제 / 강사신청 / 상담원연결

### Phase B — FAQ 챗봇 (엑셀 업로드, 개발 없음)
- [ ] FAQ 60개+ 작성 (상품/배송/주문/교환/강사 카테고리)
- [ ] 지식+ 엑셀 파일 업로드 → 자동 FAQ 챗봇 완성
- [ ] 강사 신청 시나리오 구성 (에어테이블 신청서 링크 안내)

### Phase C — 스킬서버 연동 (n8n Webhook 개발)
- [ ] 주문/배송 조회 스킬서버 (n8n Webhook + 메이크샵 API)
- [ ] 5초 타임아웃 대응: 캐시 방식 (노션 사전 수집) 적용

### Phase D — 마케팅 채널 활성화 (지속적)
- [ ] 알림톡에 채널 친구추가 버튼 삽입
- [ ] 자사몰/포장 박스에 QR코드 추가
- [ ] 월 2~4회 채널 소식 발행 (신상품/프로모션)

> Typebot 자사몰 위젯: 자사몰 트래픽 증가 시 추후 검토

---

## Phase 9 — 추가 고도화 방안 (오라클 클라우드 활용)

> 오라클 클라우드 서버 (2 OCPU / 12GB) 여유 리소스 활용

### 에이전트 고도화 방안

```
1. 재고 부족 자동 알림
   메이크샵 재고 API → 재고 N개 이하 → 텔레그램 즉시 알림
   → 바로 발주/재고 확인 가능

2. 신규 주문 실시간 알림 (고도화)
   현재: 메이크샵 자체 알림톡
   추가: 주문 후 즉시 텔레그램으로도 알림
   → 자사몰 + 스마트스토어 주문 통합 모니터링

3. 매출 대시보드 자동 집계
   메이크샵 주문 API → 일/주/월 매출 집계
   노션 대시보드 자동 업데이트
   → 매출 현황 한눈에 파악

4. 에어테이블 ↔ 메이크샵 양방향 동기화
   에어테이블 CRM 회원 정보 ↔ 메이크샵 회원 DB
   → 강사회원 외 다른 그룹도 자동 관리

5. 웨딩 시즌 자동 프로모션
   노션 캘린더 → 계절/기념일 기반 쿠폰 자동 발급
   → 발렌타인, 화이트데이, 어버이날, 결혼 성수기 등

6. 상품 리뷰 스크랩 대시보드
   멀티플랫폼 리뷰 한곳에 모으기 (가능 범위 내)
   - 자사몰: 메이크샵 API (가능)
   - 스마트스토어: API 미지원 → 수동 또는 판매자센터 스크랩
   - 인스타그램: 태그 멘션 API (Meta Graph API)
   → 노션 리뷰 DB에 통합 기록

7. 서버 헬스체크 + n8n 모니터링
   n8n 자체를 감시하는 워크플로우
   → 워크플로우 오류 시 즉시 텔레그램 알림
```

---

## 현황 대시보드

### 노션 DB UUID (생성 완료)

| DB명 | UUID | 생성일 |
|------|------|--------|
| CS 문의 DB | `312d119f-a669-81bb-859f-eda4a609e8bd` | 2026-02-25 |
| CS 템플릿 DB | `312d119f-a669-8147-aad9-cdb446e24481` | 2026-02-25 |
| 리뷰 DB | `312d119f-a669-81b4-8a59-e53b0b97a234` | 2026-02-25 |
| 콘텐츠 캘린더 DB | `312d119f-a669-8101-8340-dc7991e3e805` | 2026-02-25 |
| 경쟁사 상품 DB | `312d119f-a669-8111-8b47-e572332fbfae` | 2026-02-25 |
| 가격 이력 DB | `312d119f-a669-81f8-924e-c224fd250468` | 2026-02-25 |

> 허브 페이지 (부모): `312d119f-a669-8135-b65a-e354dfae1d58` — 할 일 DB 하위에 위치

### 알림톡 템플릿 현황

| 기능 | template_code | 등록일 | 검수 완료 |
|------|--------------|-------|---------|
| F010 무통장 취소 | PRESSCO_CANCEL | - | - |
| F021 장바구니 이탈 | PRESSCO_CART | - | - |
| F020 VIP 승급 | PRESSCO_VIP | - | - |
| F024 리뷰 유도 | PRESSCO_REVIEW | - | - |
| F025 혜택 지급 | PRESSCO_BENEFIT | - | - |

### 워크플로우 배포 현황

| 워크플로우 | 기능 | 상태 | 배포일 |
|-----------|------|------|--------|
| ~~F010 미수금 관리~~ | 메이크샵 자체 기능 대체 | ❌ 불필요 (비활성 보관) | — |
| FA-001 강사회원 등급 | 에어테이블→메이크샵 등급변경 | ✅ 운영 중 | 2026-02-24 (180건 처리 완료) |
| FA-002 강사신청 알림 | 5분 폴링 → 텔레그램 | ✅ 운영 중 | 2026-02-25 |
| F040 스마트스토어 CS | 네이버 커머스 API 답변 | ⚪ 미배포 | - |
| F030a SNS 일일 리마인더 | 매일 21:00 콘텐츠 현황 알림 | ✅ 운영 중 | 2026-02-25 (ID: A2VToTXNoaeHu29N) |
| F030b SNS 주간 리포트 | 매주 일요일 20:00 주간 현황 | ✅ 운영 중 | 2026-02-25 (ID: 3X7AM40dgQP4SQAO) |
| F025 혜택 지급 | 이벤트 자동 지급 | ⚪ 미배포 | - |

---

## 주요 결정 사항 (사용자 확인 필요)

1. **채널톡 유료 전환 여부** (`$29/월 얼리스테이지`)
   - YES → Phase 5 (CS 자동화) 진행
   - NO → Phase 5 영구 보류, CS는 수동 유지

2. **챗봇 옵션 선택**
   - A: 카카오 오픈빌더 (서버 부담 0, 추천)
   - B: 오라클 Typebot (자사몰 위젯, 나중에)

3. **에어테이블 연동 식별자 확인**
   - 에어테이블 강사회원 테이블에서 메이크샵 회원 식별 필드명
   - (이메일? 아이디? 고객코드?)

4. **장바구니 이탈 효과 분석 기준**
   - 몇 %의 전환율이 나와야 계속 운영할 것인지

---

## KPI 목표

| 지표 | 목표 | 측정 방법 |
|------|------|---------|
| 미수금 처리 자동화 | 100% | F010 실행 로그 |
| 강사회원 등급 변경 자동화 | 100% | FA-001 실행 로그 |
| 스마트스토어 CS 자동 답변율 | >80% | F040 실행 로그 |
| SNS 콘텐츠 발행 지연 감소 | 0건 | 노션 캘린더 |
| 월 절약 업무 시간 | >10시간 | 수동 집계 |

---

## 관련 파일

| 파일 | 용도 |
|------|------|
| `PRD.md` | 전체 기능 명세 원천 |
| `AUTOMATION-STRATEGY.md` | 전략 상세 |
| `notion-db-schema.md` | 노션 DB 6개 스키마 설계 |
| `alimtalk-templates.md` | 알림톡 템플릿 6개 문안 |
| `.claude/agents/shopping-automation-specialist.md` | 구현 총괄 에이전트 |
| `.claude/agents/n8n-workflow-builder.md` | 워크플로우 JSON 생성 |
| `.claude/agents/makeshop-api-expert.md` | 메이크샵 API 명세 |
| `.claude/agents/n8n-server-ops.md` | 서버 배포/디버깅 |

---

## 변경 이력

| 날짜 | 내용 |
|------|------|
| 2026-02-24 | ROADMAP 전면 개편 v2 (채널톡 제약 반영, Phase 재설계) |
| 2026-02-25 | Phase 0 완료: 노션 DB 6개 생성(UUID 확보), n8n Credential 확인, 알림톡 가이드 제공 |
| 2026-02-25 | Phase 1 진행 시작: F010 무통장 미수금 워크플로우 구현 착수 |
| 2026-02-25 | F010 워크플로우 서버 배포 완료 (ID: 8mvAqKsA1BUkPF3j) — 텔레그램 알림 수신 확인. 알림톡 노드는 검수 완료 후 활성화 예정 |
| 2026-02-25 | F010 폐기 — 메이크샵 자체 기능으로 대체 확인. 메이크샵 오픈 API는 userid 없이 전체 주문 조회 불가 (기술적 제약 확정) |
| 2026-02-25 | F040 제외 결정 — 스마트스토어 CS 자동 답변 불필요 |
| 2026-02-25 | F030 배포 완료 — SNS 콘텐츠 일일 리마인더(매일 21:00) + 주간 리포트(일요일 20:00) 활성화 |
